<div class="modal fade card-body" id="rule-modal" role="dialog" style='overflow-y:auto' aria-labelledby="detailLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content p-1" style='width:1000px; height:auto'>
            <div class='d-flex justify-content-end p-3'>
                <button type="button" class=close data-dismiss="modal" aria-label="Close">x</button>
            </div>
            <div class="modal-body justify-content-center" id='rule_body'>
                <form id="add_rule_form">
                    <div class="rule card-body shadow mt-4" style="font-size: 12px; border-radius:20px;">
                        <div class='row'>
                            <h5 class='text-teiren font-weight-bold ml-3 mt-2'>Rule Configuration</h5>
                        </div>
                        <div class="content">
                            <div class="form-group row text-center">
                                <div class="col-sm-6 mb-sm-1">
                                    <span>Rule Name</span>
                                    <input type="text-area" class="form-control form-control-user" name="name" placeholder="Rule Name">
                                </div>
                                <div class="col-sm-6 mb-sm-1">
                                    <span>Rule Severity</span>
                                    <br>
                                    <select name="severity" class="btn btn-md" style="background-color:#FFFFFF; border-color:#E5E5E5; width:100%;">
                                        <option value="1">1. LOW</option>
                                        <option value="2">2. MID</option>
                                        <option value="3">3. HIGH</option>
                                        <option value="4">4. CRITICAL</option>
                                    </select>
                                </div>
                            </div>
                            <div style="padding: 5px 10px;">
                                <span class="text-teiren font-weight-bold" style="font-size: 15px">
                                    Properties
                                </span>
                            </div>
                            <div style="border: 3px solid #24b6d4; border-radius: 20px; padding: 30px 0; margin-bottom: 20px;">
                                <div id="properties">
                                    <div class="form-group row text-center">
                                        <div class="text-center col-5 mb-1">
                                            <span>Rule Property</span>
                                            <input type="text-area" class="form-control form-control-user" name="must_property_name" placeholder="Rule Property">
                                        </div>
                                        <div class="col-2">
                                            <select name="must_property_operator" class="btn btn-md mt-3 pl-0" style="background-color:#FFFFFF; border-color:#E5E5E5; width:100%;">
                                                <option>=</option>
                                                <option>!=</option>
                                            </select>
                                        </div>
                                        <div class="col-5">
                                            <span>Rule Value</span>
                                            <input type="text-area" class="form-control form-control-user" name="must_property_value" placeholder="Rule Value">
                                        </div>
                                    </div>
                                </div>
                                <div class="px-2">
                                    <button type="button" class="btn btn-outline-teiren btn-block" onclick="addProperty()">Add Property</button>
                                </div>
                            </div>
                        </div>
                        <input id="addNewRuleSetbtn" type='button' value='Add Rule' class="btn btn-teiren btn-block h6 mt-4" onclick='addNewRuleSet()'>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-md btn-outline-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script>
    function addProperty(){
        $.ajax({
            url: 'add_property/',
            headers:{
                'X-CSRFToken': '{{csrf_token}}'
            },
            type: 'post',
        }).done(function(response){
            var $response = $(response)
            $(`#properties`).append($response.hide())
            $response.slideDown()
        })
    }

    function addNewRuleSet(){
        $.ajax({
            url: 'add_ruleset/',
            headers:{
                'X-CSRFToken': '{{csrf_token}}'
            },
            type: 'post',
            data: $('#add_rule_form').serialize()
        }).done(function(response){
            alert(response)
        })
    }
</script>